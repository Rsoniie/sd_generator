<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mermaid.js High-Level Design</title>
</head>
<body>

    <h2>Mermaid.js High-Level Design Flowchart</h2>

    <div class="mermaid">
        graph TD
        %% EXAMPLE SYNTAX
        X[Example Start] --> Y{Example Condition?};
        Y -- Yes --> Z[Proceed with example logic];
        Y -- No --> W[Return example error];
    
        %% SYSTEM DESIGN FOR ${prompt}
        A[User initiates request] --> B{Is request valid?};
        B -- Yes --> C[Parse request parameters];
        B -- No --> Z[Return invalid request error];
    
        C --> D[Route to appropriate service];
        D --> E{Service Type?};
    
        %% Service A branch
        E -- Type A --> F[Service A: Perform main operation];
        F --> G[Service A: Access data store];
        G --> H{Data found?};
        H -- Yes --> I[Service A: Process data];
        H -- No --> J[Service A: Return 'not found'];
        I --> K[Service A: Format response];
        K --> L[Service A: Send response];
    
        %% Service B branch
        E -- Type B --> M[Service B: Validate input];
        M --> N[Service B: Perform calculations];
        N --> O{Complex steps needed?};
        O -- Yes --> P[Service B: Execute complex logic];
        O -- No --> Q[Service B: Simple response];
        P --> R[Service B: Update data store];
        R --> S[Service B: Create final output];
        S --> T[Service B: Send response];
        
        %% Service C branch
        E -- Type C --> U[Service C: Authenticate request];
        U --> V[Service C: Check user permissions];
        V --> W{Permissions valid?};
        W -- Yes --> X[Service C: Provide secured resource];
        W -- No --> Y[Service C: Return 'access denied'];
        X --> AA[Service C: Format secured response];
        AA --> AB[Service C: Send response];
    

    </div>

    <!-- Mermaid.js Import -->
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({ startOnLoad: true });
    </script>

</body>
</html>
